# water**melon** 综述

原文：https://www.docs.melonport.com/#watermelon-protocol-reference

## 介绍

walter**melon** 协议旨提供一个去中心化的、公共的、permissionless、健壮的基础设施，用于管理以太坊上的加密 Token 资。它的目的是为当前基金管理生态提供一套可行的、低成本的替代方案，该生态系统在大多数法律管辖范围为是相似的。

water**melon** 协议由一系列部署在以太坊上的 Solidity 智能合约组成，并且提供了JavaScript 库  `Melon.js`，用于浏览器直接与协议交互。

## 动机

今天，启动和运营投资基金是一项艰巨而资本密集的工作。 在很大程度上，适用的法律和要求（随着时间的推移而发展的难以克服的障碍）起源于单一的理想：保护投资者资本。

令人眼花缭乱的众多法律、法规以及要求给投资管理带来了很多障碍。有意从事投资管理活动的个人或组织，必须能够承担合规性成本。最初的直接成本有：法律和监管费用、设置成本和服务提供商成本。运营基金会产生其他间接成本，例如旨在满足要求的后台支持人员、IT系统和监管报告。 这意味着只有在管理一定规模的资产之后，管理基金才具有财务可行性。 实际上，这种规模非常重要。 这必然会通过设置进入障碍来减少管理人员的数量，从而形成一批已经在大规模运营的老牌企业。

我们相信，选择是好的，当 water**melon** 协议能够证明并可靠地提供某些信任、法律和监管触点时，投资管理人才没有强制的理由受到障碍。

最终，起初为了保护投资者的成本确实由投资者承担，因为投资业绩的一部分被这些成本消耗掉了。我们相信，water**melon** 协议能够实现传统投资管理行业一些根本无法实现的目标：增加投资者保护，大幅降低基金运营成本，为新的和创新的投资经理创造公平的竞争环境，并适用于任何规模的基金投资。

## 概览

Melon 协议分为两层：第一层是现有的所有基金，由各自的经理控制，并由投资者参与；第二层是基础设施级智能合约，由我们的治理系统管理，对于维持健康的基金生态系统至关重要。

下面提到的每个子系统在文档的其他部分都有详细的讨论。本文旨在提供组件概览，并简要描述每个组件的功能。

### 基金

每个基金都是一小部分智能合约，投资经理在创建时定制参数。

基金的核心是一份名为 Hub 的合约。该合约跟踪其余组件，形成轮辐装结构。Hub 还提供设置基金所需的方法，并维护一个访问控制列表，记录哪些组件可以调用哪些方法。

Vault 组件的作用是简单地为基金存储 token，并将它们与其他组件隔离以减少接触。

还有一个 Shares 组件，它提供基金所有权的单位账户。Shares 不可交易，但随着投资者进入和退出基金而被创建和销毁。

此入口点由 Participation 组件提供。该合约的功能允许投资者用某些允许资产中的一种购买股票，或者将其兑换成基金相关资产的比例“切片”。Share 价格决定了为新投资者创造的股票数量，以及赎回时给予的相关资产数量。

Accounting 组件提供基金的整体股价。它还跟踪基金拥有的资产数量，并计算与股价相关的其他指标（例如总资产价值）。此外，会计部分提供了一种触发基金费用支付的方法。

在基金有效期内的某些时间点，例如在赎回股票以及在指定的奖励期结束时，会向投资经理发放奖励费用。目前有两种类型：管理费和绩效奖。它们由 FeeManager 组件跟踪。管理费仅根据时间计算，而绩效奖的金额则由股价演变决定。

投资经理通过使用 Trading 组件上的方法进行趋利交易，试图最大化基金市值。此合约通过使用交换适配器提供了透明方式与多种交换类型交换。

然而，通过作为基金风险管理子系统一部分实施的规则，投资经理无法执行超过特定门限的不良交易。这些规则也可用于防止其代理人的疏忽或恶意交易。风险管理规则在 Policy Manager 组件中跟踪。顺便提一下，通过参与合约对基金的投资也通过称为合规性策略的规则进行参数化，这些规则也由 Policy Manager 跟踪。

虽然基金的行为是在其组件合约中定义的，但其大部分功能都依赖于周边的基础设施。

### 基础架构合约

这些合约是为了整个网络的收益而部署的。它们的作用是保持整个系统运行，但不受个别投资经理或投资者的控制。相反，它们由治理系统或其某个组成部分管理。

投资经理可通过基金工厂创建指定协议版本的资金。每种基金组件的工厂也是独立部署的，并且在生产新基金时被基金工厂使用。

每种交换类型也有相应的基础设施适配器合约，由所有基金共享。适配器只是将基金交易组件上的“通用”交换方法转换为特定交易所期望的方法。

Registry 合约为其他基础设施合约提供了高层次接口。

跟踪的地址之一是 Engine 合约。Engine 使用文档中其他地方讨论的  buy-and-burn 模型，通过购买 ETH 来使 MLN 不再流通。使用的 ETH 由 Engine 储存，以便为资金支付并执行某些操作。

Registry 跟踪的另一份合约是整个系统的 Price Source。Price Source 来源对于资金的正常运作至关重要，因为它会产生许多基金行为中使用的信息，例如投资、赎回和付费。

如上所述，基础架构层由 Governance 管理。有关治理结构和运营方式的更多信息，请参阅治理文档。